////  ARThread.h//  ThreadTest////  Created by liu peng on 9/14/11.//  Copyright 2011 none. All rights reserved.//#import "Common.h"#import "ARException.h"/********************************同步**********************************//********************************Event**********************************//*此对象实现了Win32下的Event对象的功能*/@interface AREvent : NSObject {		NSCondition		*cond;		BOOL			isAutoReset;				BOOL			state;}-(id)	initEvent : (BOOL)is_auto;-(void) set;-(void) reset;-(void)	wait;-(BOOL)	waitTimeout : (NSTimeInterval) milliseconds;@end/********************************读写锁**********************************/@interface ARRWLock : NSObject {		pthread_rwlock_t		rwLock;		}-(id)	init;-(void) dealloc;-(void) readLock;-(BOOL) tryReadLock;-(void)	writeLock;-(BOOL)	tryWriteLock;-(void)	unLock;@end/**********************************************************************//********************************同步辅助工具*******************************/@interface ARAsyncQueue : NSObject{		NSLock				*lock;		NSMutableArray		*waitQueue;		NSMutableArray		*dataQueue;}-(id)	init;-(void)	dealloc;-(BOOL)	hasIdleThread;-(BOOL)	isEmpty;-(void)	clear;-(id)	getData;-(id)	getDataTimeout : (NSTimeInterval) milliseconds;-(void)	putData : (id)data;@end/**********************************************************************//********************************线程控制*******************************/@class ThreadData;@interface ARThread : NSThread {		pthread_t		thread;		AREvent			*event;				ThreadData		*data;}+(void)	sleep : (NSTimeInterval)milliseconds;-(id)	init;-(id)	initWithTarget : (id)obj 			selector : (SEL)sel 			argument : (id)arg						;-(void)			join;-(BOOL)			joinTimeout : (NSTimeInterval) milliseconds;-(BOOL)			isActive;-(void)			getPriority : (int*)prio;-(void)			setPriority : (int)prio;@end